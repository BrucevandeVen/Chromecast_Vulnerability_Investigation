# Welke hack methodes zijn al toegepast op een Chromecast?

# Library (Community Research)
### Python script
Ik heb een artikel van [Brussec Security](https://www.brussec.com/nl/2019/01/11/chromecasts-hacken-voor-fun/) gelezen over een Chromecast exploit, deze is echter wel in januari 2019 geschreven, dus het kan zijn dat de exploit al verholpen is. De exploit die in dit artikel beschreven wordt is de meest bekende Chromecast exploit.  
Kort samengevat zorgt de Chromecast er voor dat poort 8008 altijd open staat voor HTTP requests, dit betekend dat als je het IP adres van de Chromecast hebt, je een aantal commands kan sturen. 
  
De mogelijkheden:  
- Youtube video afspelen
- Naam veranderen
- Wifi netwerken scannen
- Herstarten
- Fabrieksinstellingen

De schrijver van dit artikel (Pablo Brusseel) heeft een [Python script](https://github.com/PabloBrusseel/CCEK) geschreven en dit openbaar gemaakt via GitHub. Op de pagina staat stap voor stap uitgelegd hoe dit script te gebruiken is.  

### CATT
Via Youtube ben ik op het kanaal [NullByte](https://www.youtube.com/watch?v=ZFq9lTiWUo4&ab_channel=NullByte) een video tegen gekomen over Chromecast exploiting. De video verwijst naar een artikel op de NullByte website over [Chromecast Hacking](https://null-byte.wonderhowto.com/how-to/hijack-chromecasts-with-catt-display-images-messages-videos-sites-more-0192834/). Op deze pagina is stap voor stap te zien hoe je CATT gebruikt om Chromecasts te "hacken". De CATT techniek is in theorie hetzelfde als het eerder genoemde Python script, ze maken beide gebruik van de port 8008 forwarding.

# Lab (Security Test)
### CATT
In de eerder genoemde video over CATT wordt uitgelegd hoe CATT werkt en geïnstalleerd moet worden. Ik heb de stappen gevolgd om uiteindelijk op de error uit te komen 'catt command not found' na veel zoeken op forums naar oorzaken, ben ik er via [deze issue](https://github.com/skorokithakis/catt/issues/203) achter gekomen dat waarschijnlijk het pat niet juist is, echter dit bleek niet het geval te zijn. Na het een aantal keer opnieuw geïnstalleerd te hebben, vond ik op een ander forum een [issue](https://gitter.im/skorokithakis/catt?at=5c990a16dfc69a1454f36f3c) van dezelfde persoon als de eerdere issue. Hier wordt genoemd dat je BASH moet gebruiken.
![image](https://user-images.githubusercontent.com/58031089/136956453-c83d4db9-f64c-455e-8fa6-19c57fbbc5a8.png)
Na het installeren van CATT (zorg er voor dat Python 3 geïnstalleerd is), kon ik command 'catt scan' uitvoeren en kon het scannen naar Chromecasts beginnen.  
Een vereiste is wel dat de machine vanaf waar de catt commands worden uitgevoerd in hetzelfde netwerk moet zitten als de Chromecast (niet direct verbonden).  
Het is logisch dat ik geen Chromecasts vind, omdat mijn Kali VM met het netwerk van de Fontys is aangesloten via een VPN.  
  
Ik vermoed dat het aan VMWare ligt dat ik niet met de Chromecast kan verbinden, dus ik ga proberen op mijn eigen laptop CATT te installeren.  
Hierbij heb ik een artikel van [Computerhope.com](https://www.computerhope.com/issues/ch001980.htm) gelezen. 
![image](https://user-images.githubusercontent.com/58031089/138268075-68be2dad-97d1-4197-be1c-f9a6dae3cf67.png)
Na het installeren van Python volgens de site en het installeren van CATT op mijn pc, kon ik nogsteeds geen Chromecasts vinden. Na het zoeken op forums ben ik er achter gekomen dat er een workaround voor de WSL is, echter na het installeren veranderde dit nogsteeds niets.  
![image](https://user-images.githubusercontent.com/58031089/138271614-fb544104-c110-48a0-ad87-9a76bafe31d0.png)
  
Uiteindelijk heb ik het probleem gevonden, de Chromecast moet in gebruik zijn! Nu ik een YouTube video aan heb gezet werkt de command 'catt scan' wel en wordt mijn Chromecast gevonden door mijn Kali Linux VM op mijn eigen netwerk (niet de VPN van school).
![image](https://user-images.githubusercontent.com/58031089/138302479-8dc98eae-2df3-4e52-8287-69d2f87a408b.png)  
Na het scannen via nmap naar het IP adres van de Chromecast was eerst geen reactie, totdat ik de Chromecast in gebruik nam. CATT stuurt de command automatisch naar de Chromecast zonder hem te specificeren als er maar één Chromecast in het netwerk is.  
Nu is het mogelijk al deze commands uit te voeren op de Chromecast:  
![image](https://user-images.githubusercontent.com/58031089/138306997-435a90e8-1eb5-4d70-8e1e-48530a435322.png)  
Een paar voorbeelden:  
![image](https://user-images.githubusercontent.com/58031089/138308044-966d15ae-e265-49b6-aaae-7162bc49403c.png)  
![image](https://user-images.githubusercontent.com/58031089/138308106-44d70550-2349-4a56-a914-7f4fb9aee383.png)  
Uiteindelijk bleek het zeer onregelmatig te werken als de Chromecast niet gespecificeerd wordt, maar dit is simpel op te lossen door -d [Chromecast IP adres] toe te voegen
